---
layout: post
title: 拦截器链思维模型
date: 2022-03-24 11:30:00 +0800
tags:
- 个人成长
- 思维模型
keywords: 个人成长,思维模型,拦截器链,面向切面
description: 拦截器链思维模型介绍
background: '/img/posts/default.jpg'
---

## 概述

```txt
[事件] -> [前置拦截器1] -> [前置拦截器N] -> [大脑处理] -> [后置拦截器1] -> [后置拦截器N] -> [反应]
```

先上思维模型的简图，以便快速查阅使用。

详细介绍请继续往下看。

## 详述

### 什么是拦截器链

在 Java Web 开发领域，有2个相似的组件，分别是**过滤器**和**拦截器**，它们都可以提供针对业务逻辑类的前置或者后置处理，比如数据的过滤和预处理，日志记录，访问权限控制等等。其中，Spring 提供的拦截器还能提供面向切面处理的能力。为了方便后文说明，这里我们统一称之为**拦截器**。（过滤器、拦截器的详细介绍网上有很多资料，本文不做赘述）

这里画一个示意图来说明它的作用：

```txt
[请求] -> [前置拦截器1] -> [前置拦截器2] -> [业务处理类] -> [后置拦截器2] -> [后置拦截器1] -> [响应]
```

简单来说 ，就是当应用收到一个外部请求后，会先经过拦截器的处理之后，才能到达业务处理类处理对应的业务，在处理完毕后，还可以再经过拦截器，最后将响应返回回去。

其中，拦截器可能有一个或多个，它们可以组成一个链式的结构，一个挨一个的处理，我们称之为**拦截器链**。

好了，关于拦截器链，你需要了解的专业知识到此介绍完毕。

### 拦截器链的隐喻

现在，我们将视角拉回到生活里。在日常生活中，我们会面对许许多多、各色各样的事情，同时，我们也会对这些事情做出自己的反应。如果将这个过程模型化，大概会是这个样子：

```txt
[事件] -> [大脑处理] -> [反应]
```

比如，我们看到迎面走过来一个同事，我们会和他打招呼；别人对你说了一句难听的话，你可能会和他吵架；收到一条陌生且富有诱惑力的链接，我们可能会尝试打开。

我们的性格、我们的习惯、甚至是我们的基因，都会左右我们面对事件的反应。

有时候我们想改变下自己。比如当听到一句难听的话时，不再下意识地去吵架，而是有选择地过滤，并尝试使用非暴力沟通的方式进行回应，从而改善关系；比如当我们看到一个优惠打折时，不再仅仅考虑价格上的优惠，而是思考拥有这件物品的必要性，再进行抉择，从而改善财务状况。

但改变经常是困难的，大多数时候你已经启用了惯性思维而不自知，身在此山中，云深不知处。

这时，如果我们在这个处理模型中，加入一点东西呢，比如这个样子：

```txt
[事件] -> [“等一等”] -> [大脑处理] -> [反应]
```

我们在接收到事件之后，在大脑处理之前，增加了一个名为“等一等”动作。顾名思义 ，就是在遇到事情的时候，先不急于做出反应，而是暂停一下，对事情做一个预处理。这样，我们就有机会摆脱惯性思维束缚，给理性思考一个介入的空间，从而达到改变的目的。

比如，别人对你说了一句很难听的话，你正要火冒三丈的时候，“等一等”，不妨思考几个问题：他为什么要这么说？他的目的是什么？我发火吵架有什么好处？结果可能会怎样？我的目的是什么？我发火吵架能达到目的吗？

有可能他是不小心触犯到了你，并非有意为之，而这时你可以选择不发火，而是尝试表达自己听到这句话的感受以及对对方的期望，可能对方就能意识到自己的不妥，你们的关系也不会因为这次小矛盾而破裂。

也有可能对方就是有意为之，故意要惹你生气，让你做出一些非理性的行为，从而导致不好的结果。在这种情况下，你可以选择借故走开，脱离战场；或者装作没听见，转移话题，避免矛盾升级，事后远离对方。

不管怎么样，这个“等一等”的停顿都能够帮助你摆脱无意识的惯性行为可能导致的不良后果。

再者，比如，当你拿起手机准备刷微博的时候，不妨也“等一等”，想一想：我现在要看什么？我为什么要刷微博？刷微博能给我带来什么？我是不是还有更重要的事情要做？

或许你思考之后察觉到你现在并不应该去刷微博，而是应该去看书；或许你刚好做完了工作，就是想刷微博放松一下。不管怎样，这个“等一等”的停顿都能帮助你做出你真正想要的决策。

有时候这个“等一等”还能帮助你摆脱一些负面的情绪。比如当你面对危险的时候，下意识地可能会感到害怕和恐惧，但是如果这个时候能够让“等一等”介入进来，让理性思考来应战恐惧，或许你能想到摆脱危险的方法，或者减小伤害的规避措施，而不是任其摆布。

从上面的例子我们可以看到，这个“等一等”的暂停的确能够为我们带来很多好处，而这个思想其实和拦截器是相似的，我们不妨把“等一等”换成拦截器，再来看一下这个处理过程：

```txt
[事件] -> [拦截器] -> [大脑处理] -> [反应]
```

当我们收到外部事件时，先经过拦截器进行一个预处理，然后再进行后面的回应和行动。这个拦截器的种类可以是多种多样的，不同的拦截器能够帮助我们达到不同的目的。

- 防火墙拦截器可以帮助我们过滤可能带来潜在伤害的事件，比如诈骗电话、恶意辱骂；
- 透镜拦截器可以帮助我们透过现象看到事情的本质，比如孩子总叛逆，实际是因为父母缺少了尊重和陪伴；
- 目的分析拦截器可以帮助我们识别双方的目的，从而掌控行动的方向，比如跟客户讨论需求，可以识别客户言语中的目的倾向，并根据自己的目的调整话题的方向。

同时，拦截器还可以组成一个链式的结构，比如这样：

```txt
[事件] -> [前置拦截器1] -> [前置拦截器N] -> [大脑处理] -> [反应]
```

这样做的好处是，我们每一次“等一等”，仅需要思考一个维度的内容，待思考完毕后，再进行下一个维度，逻辑清晰，不会杂糅在一起。在面对一些比较典型的场景，还能复用之前的流程，形成一个思维模式，方便我们快速地解决问题。

### 拦截器链的思维模型

我们将上述的拦截器链思想总结为一个思维模型，便是**拦截器链思维模型**，它典型的结构如下：

```txt
[事件] -> [前置拦截器1] -> [前置拦截器N] -> [大脑处理] -> [后置拦截器1] -> [后置拦截器N] -> [反应]
```

当我们主动或被动地遇到一个事件时，先通过前置拦截器链的过滤处理，才能到达我们大脑的反应思考区域。当我们思索出一个结果时，再经过后置拦截器链的思考处理，最终决定我们的行动。

这样，我们原始的惯性的思维便有了一个理性的保护壳，能够帮助我们更好地思考和行动。而且，一旦你熟练使用了这个思维模型之后，拦截器链便会逐渐成为你思维的一部分，也就是成为你惯性思维的一部分，换句话讲，就是你的思维操作系统拥有了升级的能力。

举个例子，比如主管交代你了一件事情，可能你刚开始是这么做的：

```txt
[任务] -> [简单思考下怎么做] -> [干就完事儿了] -> [反馈结果]
```

但当你加上一些拦截器链之后，事情就开始变得不一样了：

```txt
[任务] -> [目的拦截器：主管的预期和目标是什么] -> [风控拦截器：存在哪些风险需要消减和反馈] -> [思考下怎么做] -> [干就完事儿了] -> [反馈结果] -> [知识管理拦截器：有哪些知识点需要沉淀和分享] -> [总结拦截器：这件事有哪些改进点，如果重来我会怎样做结果更好]
```

加入了拦截器链的处理方式除了能把事情本身做得更好之外，我们还能同时提高其他方面能力的沉淀。比如上图展示的知识管理、风险控制等，这其实就是**面向切面**思想的一个体现。我们在完成任务的同时，也更新了自己的知识系统，更新了对风险控制的理解和掌握。如果你还有其他**关注点**，比如沟通交流能力，也可以加入到拦截器链里，让自己能够由点及面地快速成长、升级。

当然，你也可以反过来使用，把现有的思维模式做一个新陈代谢，比如这样：

```txt
[事件] -> [原拦截器链] -> [大脑处理] -> [反应]
                   |
                   |
                   V
[事件] -> [新拦截器链] -> [大脑处理] -> [反应]
```

例如，当你面对一个危机的时候，原先你可能倾向于看到困难，满眼都是不可能和灾难般的后果，那是因为你在无意识里加入了一个**消极透镜拦截器**，它将所有负面信息过滤到了你的面前，所以你只能看到困难；但此时如果你意识到了这个拦截器的存在，并尝试将其替换成**积极透镜拦截器**，可能你看到的就是机遇，是方法，是希望，是可能达到的更好的结果。

不过这种使用方法更高级也更难掌握一些，因为它需要你能够**主动地意识到**这个拦截器的存在，或者说，将这个拦截器从你的固有思维中剥离出来，然后才能进行拦截器的替换升级。也就是说，你要知道你知道，或者，你要知道你不知道。

### 最后：实践

现在，你已经了解什么是拦截器链思维模型了，但这仅仅只是个开始。要让你的思维系统升级，让你的生活受益，关键在于实践，在于日常的主动使用。每个人的思维方式不同，它可能适合你，也可能不适合你，又或许你已经有了类似的思维模型，并不需要一套重复的东西。不管怎样，就像小马过河一样，只有亲身实践了之后，你才能知道。

希望这套思维模型能够丰富你的思维系统，让生活朝着你想要的方式越过越好。
