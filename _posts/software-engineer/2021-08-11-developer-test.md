---
layout: post
title: 开发者测试--概念篇
date: 2021-08-11 09:40:00
tags:
- 关键能力
- 开发者测试
keywords: 开发者测试
description: 开发者测试的相关概念
background: '/img/posts/default.jpg'
---

（建设中）

> 测试就是获得软件的反馈。

## 自动化测试基本策略

自动化测试的实践可以从5个最基础的方面进行策划：

1. 开发流程。在开发代码前先写好测试，有助于明确程序成功运行的结果，并帮助我们进行软件设计。
2. 客户测试。明确客户希望软件做什么事情。
3. 单元测试。自动化运行每一个单元测试。
4. 可测试性设计。易于测试的设计往往是良好的设计，反之亦然。
5. 测试组织。

## 何为好的测试

- 良好的可读性
- 有意义的代码结构
- 用正确的方法测试正确的事物
- 测试用例的独立性
- 测试是可重复的

## 测试坏味道

测试坏味道和代码坏味道类似，表示有问题的测试。有三类测试坏味道：代码坏味道，行为坏味道和项目坏味道。

我们要意识到坏味道，但并不意味着所有问题都要解决，因为有些问题的解决成本太高，我们需要平衡，只需要保证项目和软件的有效运行即可。最好的方法是通过有效的自动化测试策略和遵循测试规范来避免坏味道的产生。

对坏味道发生的根因分析，仅仅使用一个问题即可：“为什么会发生”，多问几次，答案就出来了。

### 代码坏味道

代码坏味道是在编写或阅读测试代码时关注的地方。

#### 坏味道：令人费解的测试

#### 坏味道：复杂的测试方法

#### 坏味道：难以测试的代码

#### 坏味道：测试代码重复

#### 坏味道：产品代码中的测试？

### 行为坏味道

当我们编译或运行测试时，会遇到行为气味。我们不需要特别观察就能注意到它们，比如编译错误或测试失败。

#### 坏味道：无法定位失败的断言

#### 坏味道：不稳定的测试

#### 坏味道：脆弱的测试

#### 坏味道：频繁的调试

#### 坏味道：人工干预

#### 坏味道：测试执行太慢

### 项目坏味道

往往由项目经理或客户注意到，可能会影响项目的健康指标。

项目经理最关注功能、质量、资源和成本。因此，项目级的气味往往聚集在这些问题上。项目经理可能遇到的最明显的衡量标准是软件的质量，以正式测试或用户/客户发现的缺陷衡量。如果生产错误的数量高于预期，项目经理必须问：“为什么所有这些错误都通过了我们的自动化测试安全网？”

#### 坏味道：有问题的测试案例

#### 坏味道：开发人员不编写测试用例

#### 坏味道：测试维护成本高

#### 坏味道：产品缺陷数量多

## 测试替身

测试替身能够帮助开发者获得对被测代码周围环境的完全控制，将被测代码与周围环境隔离开，换句话说，有点类似于控制变量。它可以帮助我们：

- 隔离被测代码
- 加速执行测试
- 使随机行为变得确定
- 模拟特殊情况
- 访问隐藏信息

测试替身有以下几种类型：测试桩，伪造对象，测试间谍，模拟对象。

### 测试桩 Stub

测试桩的目的是用最简单的可能实现来代替真实实现。

例如，Logger的log方法，在测试时并不关心，可以使用测试桩保留一个空实现即可。

### 伪造对象 Fake

真实事物的简单版本，优化地伪造真实事物的行为，且无副作用。

例如，持久化对象，不需要访问真实的数据库，仅需提供基本的实现即可。

### 测试间谍 Spy

测试间谍用于记录过去发生的情况，这样测试在事后就知道所发生的一切。

### 模拟对象 Mock

是一个在特定情景下可配置行为的对象。

## 测试过程

“准备 - 执行 - 断言”，即先准备用于测试的对象，然后触发执行，最后对输出进行断言。

"给定 - 当 - 那么"，即给定某个上下文，当发生某些事情时，那么期望某些结果。

## 可测试的设计

## 可测试的编码

## 参考资料

- 《xUnit Test Patterns: Refactoring Test Code》，C3
- 《单元测试的艺术》
- 《测试驱动开发》
- 《有效的单元测试》
