---
layout: post
title: 【软件设计原则】单一职责原则SRP
date: 2020-03-01 23:12:27 +0800
categories: 软件工程师系列
tags:
- 软件设计与重构
- 设计原则
keywords: 单一职责原则,设计原则
description: 单一职责原则。直白地讲，就是是对于一个类来说，它应该只完成单一功能，不要既会干这，又会干那，否则，它累，你也累。
background: '/img/posts/default.jpg'
---

**SRP** - Single Responsibility Principle，单一职责原则。直白地讲，就是是对于一个类来说，它应该只完成单一功能，不要既会干这，又会干那，否则，它累，你也累。

## 定义

为什么这么说呢，让我们先来理解一下职责的意思。类的职责，就像人的职责一样，描述了应该做什么事情；同时，类的每一个职责也都是一个变化的原因，一个修改它的原因。如果一个类承担了多个职责，那么引起它变化的原因就会有多个。这样就会把不同的职责耦合在一个类里，当一个职责发生了变化时，很可能会影响这个类完成其他职责的能力。这样会出现什么情况呢，就是我明明只改了这一点功能，发现这个类其他原本好好的功能突然出现了莫名其妙的bug。所以，应该确保一个类或模块只有一个改变它的原因。

## 例子

概念上理解起来比较抽象，我们举个例子来看看。
（待补充）

## 使用场景

那么，对于这个原则，我们应该什么时候去用呢？这依赖于程序变化的方式。永远不变的就是变化，而变化的方式往往决定了我们应对的方式。如果程序的变化会引起这个类中多个职责的变更，那么我们就需要分解一下，让它只做单一的事情，其他的功能让别的类去做；如果程序变化的方式总是导致其中的几个职责同时变化，那就不需要分离了；再或者，程序不倾向于在这个功能上发生变化，那我们也没必要非得去分离职责，毕竟过犹不及。

## 好处

仅仅说明这个原则似乎并不能说服我们在开发活动中去实践，那么这个原则会带来什么好处呢？且看：

1. 单一职责保证了一个类只做逻辑功能相关的，或者抽象层面相同的事情，一看就知道是干啥的，代码可读性高；
2. 单一职责也确保了当变化来临的时候，我们可能只需要新增一个类来做新的功能，而不用修改原有的类，这一点又符合了开闭原则；或者，我们只需要修改这个类，不用担心可能会影响其他类的功能，毕竟它们之间已经通过单一的职责解耦了；
3. 单一职责有利于我们开展单元测试。开发人员的单元测试能帮助我们在前期阻截大部分问题，而拥有单一职责的类更容易进行单元测试，因为你知道它只做了这么一件事，所以单元测试完全可以围绕着这件事展开，你有信心确保单元测试可以覆盖针对它的几乎所有的场景。
4. 单一职责还能降低代码的圈复杂度。毕竟不相关的功能都提取出去了，代码里的分支和嵌套也会相应地减少，更低的圈复杂度也有利于提高程序的质量。

单一职责原则是SOLID原则中最简单，最好理解的原则，但实际还需要大量的实践才能完全掌握它。在我看来，其背后的思想就是认清变化，分解简化，让代码更加健壮，有点像并发编程里的不可变类一样，把复杂度降低在我能控制的范围内，这样我就能hold住了。
（未完待续）